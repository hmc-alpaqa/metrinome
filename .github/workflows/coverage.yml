name: Coverage
on:
  push:
    branches:
      - develop
  pull_request:
    branches:
      - develop
jobs:
    coverage-job:
        name: Coverage Job
        runs-on: self-hosted
        timeout-minutes: 30
        steps:
        - id: step1
          run: docker exec -w /app/code detached_repl make coverage
        - id: step2
          uses: codecov/codecov-action@v1
          with:
            token: ${{ secrets.CODECOV_TOKEN }}
